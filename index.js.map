{"version":3,"file":"index.js","sources":["../src/home.js"],"sourcesContent":["//Логіка сторінки Home\n\nconst BASE_URL = 'https://dummyjson.com/products';\nconst CATEGORIES_END_POINT = '/category-list';\nconst PRODUCT_SEARCH_END_POINT = '/search?q=';\n\nconst categoriesContainer = document.querySelector('.categories');\nconst productsContainer = document.querySelector('.products');\nconst searchBtn = document.querySelector('.search-form__btn');\nlet currentPage = 1;\nconst PRODUCTS_PER_PAGE = 12;\n\nasync function loadProducts(page = 1) {\n  try {\n    const skip = (page - 1) * PRODUCTS_PER_PAGE;\n    const response = await fetch(\n      `${BASE_URL}?limit=${PRODUCTS_PER_PAGE}&skip=${skip}`\n    );\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    throw new Error('Failed to load products');\n  }\n}\n\nasync function displayInitialProducts() {\n  try {\n    const data = await loadProducts();\n    if (!data.products.length) {\n      alert('No products found');\n      return;\n    }\n    productsContainer.insertAdjacentHTML(\n      'beforeend',\n      createMarkup(data.products)\n    );\n\n    if (data.total > PRODUCTS_PER_PAGE) {\n      addLoadMoreButton();\n    }\n  } catch (error) {\n    alert(error.message);\n  }\n}\n\nfunction addLoadMoreButton() {\n  const loadMoreBtn = document.createElement('button');\n  loadMoreBtn.textContent = 'Load more';\n  loadMoreBtn.classList.add('load-more-btn');\n  productsContainer.after(loadMoreBtn);\n\n  loadMoreBtn.addEventListener('click', async () => {\n    currentPage += 1;\n    try {\n      const data = await loadProducts(currentPage);\n      if (currentPage * PRODUCTS_PER_PAGE >= data.total) {\n        loadMoreBtn.style.display = 'none';\n      }\n\n      productsContainer.insertAdjacentHTML(\n        'beforeend',\n        createMarkup(data.products)\n      );\n    } catch (error) {\n      alert(error.message);\n    }\n  });\n}\n\nasync function searchProduct() {\n  const query = document.querySelector('.search-form__input').value.trim();\n  if (!query) {\n    throw new Error('Please enter a search term');\n  }\n  const response = await fetch(\n    `${BASE_URL}${PRODUCT_SEARCH_END_POINT}${query}`\n  );\n  const data = await response.json();\n  return data;\n}\n\nfunction clearProducts() {\n  productsContainer.innerHTML = '';\n}\n\nsearchBtn.addEventListener('click', async e => {\n  e.preventDefault();\n\n  clearProducts();\n\n  try {\n    const data = await searchProduct();\n    console.log(data);\n\n    if (!data.products.length) {\n      alert('No products found for your search term');\n      return;\n    }\n    productsContainer.insertAdjacentHTML(\n      'beforeend',\n      createMarkup(data.products)\n    );\n  } catch (error) {\n    alert(error.message);\n  }\n});\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ images, title, category, description, rating, price }) => `\n    <li class=\"product-card\">\n      <img src=\"${images[0]}\" alt=\"${title}\" />\n      <div class=\"product-info\">\n        <h3>${title}</h3>\n        <p>Category: ${category}</p>\n        <p>Description: ${description}</p>\n        <p>Rating: ${rating}</p>\n        <p>Price: $${price}</p>\n        \n      </div>\n    </li>\n  `\n    )\n    .join('');\n}\n\ndisplayInitialProducts();\n"],"names":["BASE_URL","PRODUCT_SEARCH_END_POINT","productsContainer","searchBtn","currentPage","PRODUCTS_PER_PAGE","loadProducts","page","skip","displayInitialProducts","data","createMarkup","addLoadMoreButton","error","loadMoreBtn","searchProduct","query","clearProducts","e","arr","images","title","category","description","rating","price"],"mappings":"oCAEA,MAAMA,EAAW,iCAEXC,EAA2B,aAEL,SAAS,cAAc,aAAa,EAChE,MAAMC,EAAoB,SAAS,cAAc,WAAW,EACtDC,EAAY,SAAS,cAAc,mBAAmB,EAC5D,IAAIC,EAAc,EAClB,MAAMC,EAAoB,GAE1B,eAAeC,EAAaC,EAAO,EAAG,CACpC,GAAI,CACF,MAAMC,GAAQD,EAAO,GAAKF,EAK1B,OADa,MAHI,MAAM,MACrB,GAAGL,CAAQ,UAAUK,CAAiB,SAASG,CAAI,EACzD,GACgC,KAAI,CAEpC,MAAkB,CACd,MAAM,IAAI,MAAM,yBAAyB,CAC7C,CACA,CAEA,eAAeC,GAAyB,CACtC,GAAI,CACF,MAAMC,EAAO,MAAMJ,EAAY,EAC/B,GAAI,CAACI,EAAK,SAAS,OAAQ,CACzB,MAAM,mBAAmB,EACzB,MACN,CACIR,EAAkB,mBAChB,YACAS,EAAaD,EAAK,QAAQ,CAChC,EAEQA,EAAK,MAAQL,GACfO,EAAiB,CAEvB,OAAWC,EAAO,CACd,MAAMA,EAAM,OAAO,CACvB,CACA,CAEA,SAASD,GAAoB,CAC3B,MAAME,EAAc,SAAS,cAAc,QAAQ,EACnDA,EAAY,YAAc,YAC1BA,EAAY,UAAU,IAAI,eAAe,EACzCZ,EAAkB,MAAMY,CAAW,EAEnCA,EAAY,iBAAiB,QAAS,SAAY,CAChDV,GAAe,EACf,GAAI,CACF,MAAMM,EAAO,MAAMJ,EAAaF,CAAW,EACvCA,EAAcC,GAAqBK,EAAK,QAC1CI,EAAY,MAAM,QAAU,QAG9BZ,EAAkB,mBAChB,YACAS,EAAaD,EAAK,QAAQ,CAClC,CACA,OAAaG,EAAO,CACd,MAAMA,EAAM,OAAO,CACzB,CACA,CAAG,CACH,CAEA,eAAeE,GAAgB,CAC7B,MAAMC,EAAQ,SAAS,cAAc,qBAAqB,EAAE,MAAM,KAAI,EACtE,GAAI,CAACA,EACH,MAAM,IAAI,MAAM,4BAA4B,EAM9C,OADa,MAHI,MAAM,MACrB,GAAGhB,CAAQ,GAAGC,CAAwB,GAAGe,CAAK,EAClD,GAC8B,KAAI,CAElC,CAEA,SAASC,GAAgB,CACvBf,EAAkB,UAAY,EAChC,CAEAC,EAAU,iBAAiB,QAAS,MAAMe,GAAK,CAC7CA,EAAE,eAAc,EAEhBD,EAAa,EAEb,GAAI,CACF,MAAMP,EAAO,MAAMK,EAAa,EAGhC,GAFA,QAAQ,IAAIL,CAAI,EAEZ,CAACA,EAAK,SAAS,OAAQ,CACzB,MAAM,wCAAwC,EAC9C,MACN,CACIR,EAAkB,mBAChB,YACAS,EAAaD,EAAK,QAAQ,CAChC,CACA,OAAWG,EAAO,CACd,MAAMA,EAAM,OAAO,CACvB,CACA,CAAC,EAED,SAASF,EAAaQ,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CAAE,OAAAC,EAAQ,MAAAC,EAAO,SAAAC,EAAU,YAAAC,EAAa,OAAAC,EAAQ,MAAAC,KAAY;AAAA;AAAA,kBAEjDL,EAAO,CAAC,CAAC,UAAUC,CAAK;AAAA;AAAA,cAE5BA,CAAK;AAAA,uBACIC,CAAQ;AAAA,0BACLC,CAAW;AAAA,qBAChBC,CAAM;AAAA,qBACNC,CAAK;AAAA;AAAA;AAAA;AAAA,GAK1B,EACK,KAAK,EAAE,CACZ,CAEAhB,EAAsB"}